var dojoConfig={async:!1,locale:"en",paths:{react:"https://cdnjs.cloudflare.com/ajax/libs/react/15.5.4/react.min","react-dom":"https://cdnjs.cloudflare.com/ajax/libs/react/15.5.4/react-dom.min",openlayers:"https://cdnjs.cloudflare.com/ajax/libs/ol3/4.1.0/ol",dojox:"../../widgets/ArcGIS/lib/dojox",esri:"../../widgets/ArcGIS/lib/esri",moment:"../../widgets/ArcGIS/lib/moment"}}
require(dojoConfig,[],function(){return define("ArcGIS/widget/ArcGIS",["dojo/_base/declare","mxui/dom","dojo/dom","dojo/on","dojo/dom-class","dojo/parser","mxui/widget/_WidgetBase","dijit/_TemplatedMixin","dojo/dom-style","dojo/dom-construct","dojo/_base/array","dojo/_base/event","dojo/_base/lang","dojo/_base/unload","dojo/cookie","dojo/json","dijit/registry","dojo/text!./template/ArcGIS.html","ArcGIS/lib/dojox/gfx/Mover","ArcGIS/lib/dojox/gfx/Moveable","ArcGIS/lib/dojox/gfx/_base","ArcGIS/lib/dojox/gfx/matrix","ArcGIS/lib/dojox/gfx/renderer","ArcGIS/lib/dojox/gfx/svg","ArcGIS/lib/dojox/gfx/filters","ArcGIS/lib/dojox/gfx/svgext","ArcGIS/lib/dojox/gfx","ArcGIS/lib/dojox/collections/_base","ArcGIS/lib/dojox/collections/ArrayList","ArcGIS/lib/dojox/grid/util","dojox/main","ArcGIS/lib/dojox/grid/cells/_base","ArcGIS/lib/dojox/grid/cells","ArcGIS/lib/dojox/grid/_Events","ArcGIS/lib/dojox/grid/_Scroller","ArcGIS/lib/dojox/html/metrics","ArcGIS/lib/dojox/grid/_Builder","ArcGIS/lib/dojox/grid/_View","ArcGIS/lib/dojox/grid/Selection","ArcGIS/lib/dojox/grid/_SelectionPreserver","ArcGIS/lib/dojox/grid/DataSelection","ArcGIS/lib/dojox/grid/_RowSelector","ArcGIS/lib/dojox/grid/_Layout","ArcGIS/lib/dojox/grid/_ViewManager","ArcGIS/lib/dojox/grid/_RowManager","ArcGIS/lib/dojox/grid/_FocusManager","ArcGIS/lib/dojox/grid/_EditManager","ArcGIS/lib/dojox/grid/_Grid","ArcGIS/lib/dojox/grid/DataGrid","ArcGIS/lib/dojox/html/entities","ArcGIS/lib/esri/nls/jsapi","ArcGIS/lib/esri/kernel","ArcGIS/lib/esri/lang","ArcGIS/lib/esri/deferredUtils","ArcGIS/lib/esri/config","ArcGIS/lib/esri/SpatialReference","ArcGIS/lib/esri/ImageSpatialReference","ArcGIS/lib/esri/geometry/Geometry","ArcGIS/lib/esri/sniff","ArcGIS/lib/esri/srUtils","ArcGIS/lib/esri/WKIDUnitConversion","ArcGIS/lib/esri/geometry/scaleUtils","ArcGIS/lib/esri/geometry/Point","ArcGIS/lib/esri/geometry/ScreenPoint","ArcGIS/lib/esri/geometry/webMercatorUtils","ArcGIS/lib/esri/geometry/mathUtils","ArcGIS/lib/esri/geometry/Extent","ArcGIS/lib/esri/geometry/Polyline","ArcGIS/lib/esri/geometry/Polygon","ArcGIS/lib/esri/geometry/Multipoint","ArcGIS/lib/esri/geometry/screenUtils","ArcGIS/lib/esri/geometry/geodesicUtils","ArcGIS/lib/esri/geometry/jsonUtils","ArcGIS/lib/esri/geometry/normalizeUtils","ArcGIS/lib/esri/geometry/Rect","ArcGIS/lib/esri/units","ArcGIS/lib/esri/geometry","ArcGIS/lib/esri/basemaps","ArcGIS/lib/esri/Evented","ArcGIS/lib/esri/fx","ArcGIS/lib/esri/tileUtils","ArcGIS/lib/esri/urlUtils","ArcGIS/lib/esri/PluginTarget","ArcGIS/lib/esri/Color","ArcGIS/lib/esri/arcade/ImmutableArray","ArcGIS/lib/esri/core/tsSupport/extendsHelper","ArcGIS/lib/esri/arcade/ImmutablePointArray","ArcGIS/lib/esri/arcade/ImmutablePathArray","ArcGIS/lib/moment/moment","ArcGIS/lib/esri/plugins/moment","ArcGIS/lib/esri/moment","ArcGIS/lib/esri/arcade/FunctionWrapper","ArcGIS/lib/esri/arcade/languageUtils","ArcGIS/lib/esri/arcade/Dictionary","ArcGIS/lib/esri/layers/gfxSniff","ArcGIS/lib/esri/request","ArcGIS/lib/esri/layers/layer","ArcGIS/lib/esri/domUtils","ArcGIS/lib/esri/symbols/Symbol","ArcGIS/lib/esri/symbols/MarkerSymbol","ArcGIS/lib/esri/symbols/LineSymbol","ArcGIS/lib/esri/symbols/SimpleLineSymbol","ArcGIS/lib/esri/symbols/SimpleMarkerSymbol","ArcGIS/lib/esri/layers/GraphicsLayer","ArcGIS/lib/esri/layers/LOD","ArcGIS/lib/esri/layers/TileInfo","ArcGIS/lib/esri/layers/TimeReference","ArcGIS/lib/esri/TimeExtent","ArcGIS/lib/esri/layers/LayerTimeOptions","ArcGIS/lib/esri/layers/TimeInfo","ArcGIS/lib/esri/layers/LayerInfo","ArcGIS/lib/esri/layerUtils","ArcGIS/lib/esri/layers/ArcGISMapServiceLayer","ArcGIS/lib/esri/layers/ImageParameters","ArcGIS/lib/esri/layers/MapImage","ArcGIS/lib/esri/layers/DynamicMapServiceLayer","ArcGIS/lib/esri/layers/LayerSource","ArcGIS/lib/esri/layers/DataSource","ArcGIS/lib/esri/layers/QueryDataSource","ArcGIS/lib/esri/layers/LayerMapSource","ArcGIS/lib/esri/layers/TableDataSource","ArcGIS/lib/esri/layers/RasterDataSource","ArcGIS/lib/esri/layers/JoinDataSource","ArcGIS/lib/esri/layers/LayerDataSource","ArcGIS/lib/esri/layers/DynamicLayerInfo","ArcGIS/lib/esri/layers/ArcGISDynamicMapServiceLayer","ArcGIS/lib/esri/layers/TiledMapServiceLayer","ArcGIS/lib/esri/layers/TileMap","ArcGIS/lib/esri/layers/ArcGISTiledMapServiceLayer","ArcGIS/lib/esri/layers/MapImageLayer","ArcGIS/lib/esri/layers/OpenStreetMapLayer","ArcGIS/lib/esri/ServerInfo","ArcGIS/lib/esri/OAuthCredential","ArcGIS/lib/esri/arcgis/OAuthInfo","ArcGIS/lib/esri/IdentityManagerBase","ArcGIS/lib/esri/Credential","ArcGIS/lib/esri/IdentityManagerDialog","ArcGIS/lib/esri/OAuthSignInHandler","ArcGIS/lib/esri/IdentityManager","ArcGIS/lib/esri/layers/VectorTileLayerImpl","ArcGIS/lib/esri/layers/VectorTileLayerWrapper","ArcGIS/lib/esri/Credential","ArcGIS/lib/esri/InfoTemplate","ArcGIS/lib/esri/InfoWindowBase","ArcGIS/lib/esri/symbols/PictureMarkerSymbol","ArcGIS/lib/esri/symbols/CartographicLineSymbol","ArcGIS/lib/esri/symbols/FillSymbol","ArcGIS/lib/esri/symbols/PictureFillSymbol","ArcGIS/lib/esri/symbols/SimpleFillSymbol","ArcGIS/lib/esri/symbols/Font","ArcGIS/lib/esri/symbols/TextSymbol","ArcGIS/lib/esri/symbols/jsonUtils","ArcGIS/lib/esri/graphic","ArcGIS/lib/esri/tasks/SpatialRelationship","ArcGIS/lib/esri/tasks/query","ArcGIS/lib/esri/PopupBase","ArcGIS/lib/esri/dijit/Popup","ArcGIS/lib/esri/tasks/Task","ArcGIS/lib/esri/graphicsUtils","ArcGIS/lib/esri/tasks/FeatureSet","ArcGIS/lib/esri/tasks/QueryTask","ArcGIS/lib/esri/tasks/RelationshipQuery","ArcGIS/lib/esri/tasks/StatisticDefinition","ArcGIS/lib/esri/dijit/_EventedWidget","ArcGIS/lib/esri/dijit/PopupRenderer","ArcGIS/lib/esri/PopupInfo","ArcGIS/lib/esri/dijit/PopupTemplate","ArcGIS/lib/esri/PopupManager","ArcGIS/lib/esri/plugins/popupManager","ArcGIS/lib/esri/_coremap","ArcGIS/lib/esri/MouseEvents","ArcGIS/lib/esri/TouchEvents","ArcGIS/lib/esri/PointerEvents","ArcGIS/lib/esri/MapNavigationManager","ArcGIS/lib/esri/map","ArcGIS/lib/esri/dijit/Attribution","ArcGIS/lib/esri/OperationBase","ArcGIS/lib/esri/undoManager","ArcGIS/lib/esri/toolbars/_toolbar","ArcGIS/lib/esri/toolbars/navigation","ArcGIS/lib/esri/toolbars/_Box","ArcGIS/lib/esri/toolbars/_GraphicMover","ArcGIS/lib/esri/toolbars/_VertexMover","ArcGIS/lib/esri/toolbars/_VertexEditor","ArcGIS/lib/esri/toolbars/TextEditor","ArcGIS/lib/esri/toolbars/edit","ArcGIS/lib/esri/toolbars/draw","ArcGIS/lib/esri/arcade/Feature","ArcGIS/lib/esri/arcade/functions/string","ArcGIS/lib/esri/arcade/functions/date","ArcGIS/lib/esri/arcade/functions/maths","ArcGIS/lib/esri/arcade/functions/fieldStats","ArcGIS/lib/esri/arcade/functions/stats","ArcGIS/lib/esri/arcade/functions/geometry","ArcGIS/lib/esri/arcade/treeAnalysis","ArcGIS/lib/esri/arcade/arcadeCompiler","ArcGIS/lib/esri/arcade/lib/esprima","ArcGIS/lib/esri/arcade/parser","ArcGIS/lib/esri/arcade/arcadeRuntime","ArcGIS/lib/esri/arcade/arcade","ArcGIS/lib/esri/renderers/arcadeUtils","ArcGIS/lib/esri/renderers/Renderer","ArcGIS/lib/esri/renderers/SimpleRenderer","ArcGIS/lib/esri/renderers/UniqueValueRenderer","ArcGIS/lib/esri/renderers/ClassBreaksRenderer","ArcGIS/lib/esri/renderers/ScaleDependentRenderer","ArcGIS/lib/esri/renderers/DotDensityRenderer","ArcGIS/lib/esri/renderers/HeatmapRenderer","ArcGIS/lib/esri/renderers/TemporalRenderer","ArcGIS/lib/esri/renderers/VectorFieldRenderer","ArcGIS/lib/esri/renderers/SymbolAger","ArcGIS/lib/esri/renderers/TimeClassBreaksAger","ArcGIS/lib/esri/renderers/TimeRampAger","ArcGIS/lib/esri/renderers/jsonUtils","ArcGIS/lib/esri/dijit/_EventedWidget","ArcGIS/lib/esri/dijit/Legend","ArcGIS/lib/esri/tasks/Task","ArcGIS/lib/esri/tasks/IdentifyResult","ArcGIS/lib/esri/tasks/IdentifyParameters","ArcGIS/lib/esri/tasks/IdentifyTask","ArcGIS/lib/esri/layers/Domain","ArcGIS/lib/esri/layers/CodedValueDomain","ArcGIS/lib/esri/layers/RangeDomain","ArcGIS/lib/esri/layers/Field","ArcGIS/lib/esri/layers/InheritedDomain","ArcGIS/lib/esri/layers/FeatureTemplate","ArcGIS/lib/esri/layers/FeatureType","ArcGIS/lib/esri/layers/FeatureEditResult","ArcGIS/lib/esri/symbols/ShieldLabelSymbol","ArcGIS/lib/esri/layers/LabelClass","ArcGIS/lib/esri/layers/RenderMode","ArcGIS/lib/esri/layers/GridLayout","ArcGIS/lib/esri/layers/OnDemandMode","ArcGIS/lib/esri/layers/SnapshotMode","ArcGIS/lib/esri/layers/StreamMode","ArcGIS/lib/esri/layers/SelectionMode","ArcGIS/lib/esri/layers/TrackManager","ArcGIS/lib/esri/layers/HeatmapManager","ArcGIS/lib/esri/layers/FeatureLayer","ArcGIS/lib/esri/dijit/editing/TemplatePickerItem","ArcGIS/lib/esri/dijit/editing/TemplatePicker","ArcGIS/lib/esri/dijit/BasemapToggle","ArcGIS/lib/esri/dijit/BasemapLayer","ArcGIS/lib/esri/styles/basic","ArcGIS/lib/esri/tasks/AddressCandidate","ArcGIS/lib/esri/tasks/locator","ArcGIS/lib/esri/promiseList","dojo/text!../lib/esri/dijit/Search/templates/Search.html","ArcGIS/lib/esri/dijit/Search","dijit/layout/BorderContainer","dijit/layout/ContentPane","dijit/Toolbar","dijit/form/Button","dijit/layout/AccordionContainer"],function(e,i,r,t,s,o,l,a,n,c,h,d,g,b,y,m,u,p){"use strict"
return e("ArcGIS.widget.ArcGIS",[l,a],{templateString:p,_progressID:null,_handle:null,_contextObj:null,_gisMap:null,_defaultPosition:null,_logNode:"ArcGIS Widget: ",visibleLayerIds:[],legendLayers:[],arcGisLayerArr:[],layerArr:[],hostName:null,midFix:"/arcgis/rest/services/",deferred:null,popupTemplate:null,_SpatialReference:null,queryOutFieldsArr:[],fieldInfosArr:[],_singleObjectZoom:12,defaultZoom:3,_editBtn:null,_removeBtn:null,_mfBtn:null,_newMxObjects:[],_queryDefinition:null,_queryLayerObj:null,_originalRenderer:null,constructor:function(e,i){this.consoleLogging&&console.log(this.id+".constructor")},postCreate:function(){this.consoleLogging&&console.log(this.id+".postCreate"),this._gisMap=null,this.layerArr=[],this.arcGisLayerArr=[],this.legendLayers=[],this._referenceMxObject=null,this._referenceMxObjectGUID=0,this._handles=[],this._referenceMxObjectsArr=[],this._initialLoad=!0,this._createTemplate()},update:function(e,i){this.consoleLogging&&console.log(this.id+".update"),this._contextObj=e,this._resetSubscriptions(),this.objectid=this._contextObj?this._contextObj.get(this.objectIDAttr):null,this.centerCoordinates=this._contextObj?this._contextObj.get(this.centerAttr):null,this.geometryType=this._contextObj?this._contextObj.get(this.geometryTypeAttr):null,this._gisMap?this.objectid?(this._referenceMxObjectsArr=[e],this._refreshMap()):this.zoomRow():this._getHostNameMF(i),i()},resize:function(e){this.consoleLogging&&console.log(this.id+".resize"),this._gisMap},_resetSubscriptions:function(){if(this.consoleLogging&&console.log(this.id+".resetSubscriptions"),this._handles){for(var e in this._handles)this.unsubscribe(e)
this._handles=[]}if(this._contextObj){var i=this.subscribe({guid:this._contextObj.getGuid(),callback:g.hitch(this,function(e){this._getReferenceMxObjects(null,!0)})})
this._handles.push(i)}},_loadMap:function(){this.consoleLogging&&console.log(this._logNode+"._loadMap"),this._SpatialReference=new esri.SpatialReference(+this.spatialReference),this._defaultPosition=new esri.geometry.Point(+this.defaultX,+this.defaultY,this._SpatialReference)
var e=new esri.dijit.Popup({fillSymbol:new esri.symbol.SimpleFillSymbol(esri.symbol.SimpleFillSymbol.STYLE_SOLID,new esri.symbol.SimpleLineSymbol(esri.symbol.SimpleLineSymbol.STYLE_SOLID,new esri.Color([255,0,0]),2),new esri.Color([255,255,0,.25]))},dojo.create("div"))
if(this.fieldInfosArr=[],this.queryOutFieldsArr=[],this._infoWindowTitle=null,this.attributesArray.length>0)for(var r=0;r<this.attributesArray.length;r++){var s={fieldName:this.attributesArray[r].attrName,visible:!0,label:this.attributesArray[r].attrLabel}
this.fieldInfosArr.push(s),this.queryOutFieldsArr.push(this.attributesArray[r].attrName),this.attributesArray[r].isTitle&&(this._infoWindowTitle=this.attributesArray[r].attrName),this.attributesArray[r].isMxReference&&(this._referenceArcGisAttr=this.attributesArray[r].attrName)}this.popupTemplate=new esri.dijit.PopupTemplate({title:"{"+this._infoWindowTitle+"}",fieldInfos:this.fieldInfosArr}),this.multipleRecordsTemplate=new esri.dijit.PopupTemplate({title:"Multiple objects found where clicked. <br><br> Please zoom in further to single object."}),this.infotemplate=new esri.InfoTemplate,this.infotemplate.setContent(g.hitch(this,function(e){var r=dojo.query(".actionList")[0]
this._mfBtn&&dojo.destroy(this._mfBtn)
var s={"class":this.onClickButttonClass,type:"button",style:"cursor : pointer; margin-right: 6px;"}
if(this.onClickMF){s.style="cursor : pointer; margin-right: 6px; color: black"
var o=i.create("span")
o.setAttribute("class","glyphicon glyphicon-share-alt")
var l=i.create("text")
this._mfBtn=i.create("button",s,o,l),l.textContent=this.onClickButttonLabel,l.style.marginLeft="4px",r=dojo.query(".actionList")[0],r.appendChild(this._mfBtn),t(this._mfBtn,"click",dojo.hitch(this,function(i){this._getMxObject(e,this._execMf,this)}))}var a=this._getTextContent(e)
return a})),this._infoWindowTitle?this.infotemplate.setTitle(this._infoWindowTitle):this.infotemplate.setTitle("Details"),this._gisMap=null,this.baseMapURL_Default?(esri.basemaps.topo.baseMapLayers=[{url:this.baseMapURL_Default}],esri.basemaps.satellite.baseMapLayers=[{url:this.baseMapURL_Satellite}]):(esri.basemaps.topo.baseMapLayers=[{url:"https://services.arcgisonline.com/arcgis/rest/services/World_Topo_Map/MapServer"}],esri.basemaps.satellite.baseMapLayers=[{url:"https://services.arcgisonline.com/arcgis/rest/services/World_Imagery/MapServer"}]),this._gisMap=new esri.Map(this.mapContainer,{basemap:"topo",center:this._defaultPosition,zoom:this.defaultZoom,sliderStyle:"small",infoWindow:e}),this._gisMap.on("layers-add-result",g.hitch(this,function(e){if(this.consoleLogging)for(var i=0;i<e.layers.length;i++){var r=void 0==e.layers[i].error?"OK":e.layers[i].error.message
console.log(" - "+e.layers[i].layer.id+": "+r)}var t=e.layers
t=h.map(t,function(e){return e.layer}),this._layerAddResultsEventHandler(t)}))
var o=new esri.dijit.BasemapToggle({map:this._gisMap,basemap:"satellite",basemaps:{topo:{title:"Normaal",thumbnailUrl:"widgets/ArcGIS/lib/esri/images/basemap/streets.jpg"},satellite:{title:"Sateliet",thumbnailUrl:"widgets/ArcGIS/lib/esri/images/basemap/satellite.jpg"}}},this.BasemapToggleDiv)
if(o.startup(),this.enableSearch){var l=new esri.dijit.Search({map:this._gisMap,showInfoWindowOnSelect:!0,enableInfoWindow:!0},this.searchDiv)
l.startup()}var a={}
a=new esri.layers.ImageParameters,a.layerIds=[2],a.layerOption=esri.layers.ImageParameters.LAYER_OPTION_SHOW
var n,c,d={},b={}
if(this._queryDefinition=null,this.layerArray.length>0&&0==this.layerArr.length)for(var y=0;y<this.layerArray.length;y++){d={serverType:this.layerArray[y].layerServerType,url:this.layerArray[y].layerURL,id:this.layerArray[y].layerID,showAttribution:this.layerArray[y].showAttribution,indexes:this.layerArray[y].visibleLayerIndexes,featureLayerID:this.layerArray[y].featureLayerID,geometryType:this.layerArray[y].layerGeometryType,opacity:this.layerArray[y].opacity,queryLayer:this.layerArray[y].queryLayer},b={id:d.id,showAttribution:d.showAttribution,spatialReference:{wkid:+this.spatialReference}},c=this.getFeatureServerNameMF?this.hostName+this.midFix+this._layerName:this.hostName+this.midFix+d.url,this.consoleLogging&&(console.log(this._logNode+this._logNode+"Full URL (HostName + Layer URL): "+c+" and options: "),console.dir(this._logNode+b)),this.layerArr.push(d),d.queryLayer&&(this._queryLayerObj=d,this._queryDefinition=this._createQueryDefinition())
try{if("MapServer"===d.serverType){if(b.imageParameters=a,n=new esri.layers.ArcGISDynamicMapServiceLayer(c+"/MapServer",b),d.indexes){for(var m=d.indexes.split(","),u=[],p=0;p<m.length;p++){var S=parseInt(m[p])
u.push(S)}d.indexes=u,n.setVisibleLayers(u)}}else if("FeatureServer"===d.serverType&&(b.mode=esri.layers.FeatureLayer.MODE_SNAPSHOT,b.outFields=this.queryOutFieldsArr,b.infoTemplate=this.infotemplate,this._token?n=new esri.layers.FeatureLayer(c+"/FeatureServer/"+d.featureLayerID+"?token="+this._token,b):(n=new esri.layers.FeatureLayer(c+"/FeatureServer/"+d.featureLayerID,b),n.setOpacity(d.opacity)),this._queryDefinition)){if(this.enableCustomStyling){var f=this._updateRenderer(n,d.geometryType)
n.setRenderer(f)}this.showAllObjectsInLayer||n.setDefinitionExpression(this._queryDefinition)}n.id=d.id,n.layerName=d.id,this.arcGisLayerArr.push(n),this.legendLayers.push({layer:n,title:n.id,startLayerTicked:this.layerArray[y].startLayerTicked})}catch(A){console.error(this._logNode+this._logNode+"Error retrieving and creating layer with URL: "+d.url+". Message: "+A)}}this._setupEvents(),this._gisMap.addLayers(this.arcGisLayerArr)},_refreshMap:function(e){var i=this._gisMap.graphicsLayerIds,r=i.filter(g.hitch(this,function(e){return e=this._queryLayerObj.id}))[0]
if(r){var t=this._gisMap.getLayer(r)
if(this.enableCustomStyling){var s=this._updateRenderer(t,this._queryLayerObj.geometryType)
t.setRenderer(s)}this._queryDefinition=this._createQueryDefinition(),this.showAllObjectsInLayer||t.setDefinitionExpression(this._queryDefinition),this._getExtentFromQueryDef(this._queryLayerObj,this._queryDefinition)}},_createSimpleMarkerSymbol:function(){switch(this.markerSymbol){case"STYLE_CIRCLE":return esri.symbol.SimpleMarkerSymbol.STYLE_CIRCLE
case"STYLE_CROSS":return esri.symbol.SimpleMarkerSymbol.STYLE_CROSS
case"STYLE_DIAMOND":return esri.symbol.SimpleMarkerSymbol.STYLE_DIAMOND
case"STYLE_SQUARE":return esri.symbol.SimpleMarkerSymbol.STYLE_SQUARE
case"STYLE_X":return esri.symbol.SimpleMarkerSymbol.STYLE_X}},_updateRenderer:function(e,i){this._simpleMarkerSymbol=this._createSimpleMarkerSymbol()
var r,t,s,o,l,a=this.defaultColor,n=a.split(",")
l="point"==i?(a+",0.8").split(","):(a+",0.25").split(","),s="point"==i?new esri.symbol.SimpleMarkerSymbol(this._simpleMarkerSymbol,10,new esri.symbol.SimpleLineSymbol(esri.symbol.SimpleLineSymbol.STYLE_SOLID,new esri.Color(n),4),new esri.Color(l)):new esri.symbol.SimpleFillSymbol(esri.symbol.SimpleFillSymbol.STYLE_SOLID,new esri.symbol.SimpleLineSymbol(esri.symbol.SimpleLineSymbol.STYLE_SOLID,new esri.Color(n),1),new esri.Color(l))
var c
c=e.renderer&&e.renderer.symbol?e.renderer.symbol:e.graphics[0]?e.graphics[0].symbol:s,this._originalRenderer||(this._originalRenderer=new esri.renderer.UniqueValueRenderer(c,this.arcGISID)),o=this._originalRenderer,o.defaultLabel=this.defaultLabel
for(var h=0;h<this._referenceMxObjectsArr.length;h++){r=this._referenceMxObjectsArr[h].get(this.objectIDAttr),t=this._referenceMxObjectsArr[h].get(this.colorAttr)
var d,b,y=t.split(",")
d="point"==i?(t+",0.8").split(","):(t+",0.25").split(","),b="point"==i?new esri.symbol.SimpleMarkerSymbol(this._simpleMarkerSymbol,10,new esri.symbol.SimpleLineSymbol(esri.symbol.SimpleLineSymbol.STYLE_SOLID,new esri.Color(y),2),new esri.Color(d)):new esri.symbol.SimpleFillSymbol(esri.symbol.SimpleFillSymbol.STYLE_SOLID,new esri.symbol.SimpleLineSymbol(esri.symbol.SimpleLineSymbol.STYLE_SOLID,new esri.Color(y),1),new esri.Color(d))
var m=this.colorArray.filter(g.hitch(this,function(e){return e.featureColor==t}))[0]
if(t){var u
if(m){var p=m.featureColorLabel
u={value:r,symbol:b,label:p}}else u={value:r,symbol:b,label:"Label Unknown"}
o.addValue(u)}}return o},_execMf:function(e,i){i.consoleLogging&&console.log(i._logNode+"._execMf")
var r=null
e&&(r=e.getGuid()),r&&mx.data.action({params:{applyto:"selection",actionname:i.onClickMF,guids:[r]},origin:i.mxform,callback:g.hitch(i,function(e){}),error:function(e){console.debug(e.description)}},this)},_getHostNameMF:function(e){this.consoleLogging&&console.log(this.id+"._getHostNameMF"),this.getHostNameMF&&this._initialLoad&&(this._initialLoad=!1,mx.data.action({params:{applyto:"none",actionname:this.getHostNameMF},origin:this.mxform,callback:g.hitch(this,function(i){this.hostName=i,this.getFeatureServerNameMF?mx.data.action({params:{applyto:"none",actionname:this.getFeatureServerNameMF},origin:this.mxform,callback:g.hitch(this,function(i){this._layerName=i,this._getReferenceMxObjects(e,!1)}),error:g.hitch(this,function(e){console.error(this._logNode+e.description)})}):this._getReferenceMxObjects(e,!1)}),error:g.hitch(this,function(e){console.error(this._logNode+e.description)})},this))},_queryLayer:function(e,i){this.consoleLogging&&console.log(this.id+"._queryLayer")
var r=""
"FeatureServer"===i.serverType?r=this.hostName+this.midFix+i.url+"/FeatureServer/"+i.featureLayerID:"MapServer"===i.serverType&&(r=this.hostName+this.midFix+i.url+"/MapServer/"+i.visibleLayerIds)
var t=new esri.tasks.QueryTask(r)
t.execute(e,g.hitch(this,function(e){if(e&&e.features&&e.features[0]){var i=e.features[0].geometry
if(i){var r=this._getCenterCoordinates(i),t=""+r.x.toFixed(5),s=""+r.y.toFixed(5)
this._contextObj&&!this._contextObj.get(this.centerAttr)&&(this._contextObj.set(this.centerAttr,t+","+s),mx.data.commit({mxobj:this._contextObj,callback:g.hitch(this,function(){}),error:function(e){console.error("Could not commit object:",e)}}))}else console.log(this._logNode+"query gave empty result")}this._gisMap.centerAndZoom(r,this._singleObjectZoom).then(g.hitch(this,function(){}))}))},_getExtentFromQueryDef:function(e,i){var r,t,s,o=new esri.tasks.Query,l=this._gisMap.spatialReference,a=new esri.geometry.Multipoint
o.outSpatialReference=l,o.returnGeometry=!0,o.outFields=this.queryOutFieldsArr,o.where=i
var n=""
"FeatureServer"===e.serverType?n=this.hostName+this.midFix+e.url+"/FeatureServer/"+e.featureLayerID:"MapServer"===e.serverType&&(n=this.hostName+this.midFix+e.url+"/MapServer/"+e.visibleLayerIds)
var c=new esri.tasks.QueryTask(n)
c.execute(o,g.hitch(this,function(e){if(e&&e.features){for(var i=0;i<e.features.length;i++){var o=e.features[i].geometry
o?(r=this._getCenterCoordinates(o),t=""+r.x.toFixed(5),s=""+r.y.toFixed(5),a.addPoint(new esri.geometry.Point(t,s))):console.log(this._logNode+"query gave empty result")}1==this._referenceMxObjectsArr.length?this._gisMap.centerAndZoom(r,+this._singleObjectZoom-1):(this._extent=a.getExtent(),this._extent.setSpatialReference(this._gisMap.spatialReference),this._gisMap.setExtent(this._extent))}}))},_getTextContent:function(e){this.consoleLogging&&console.log(this.id+"._getTextContent")
for(var i="",r=0;r<this.fieldInfosArr.length;r++){var t=e.attributes[this.fieldInfosArr[r].fieldName]
t||(t=""),i+="<b>"+this.fieldInfosArr[r].label+"</b> "+t+"<br>"}return i},taskCallbackInfoTemplate:function(e){this.consoleLogging&&console.log(this.id+".taskCallbackInfoTemplate")
var i=null
return e.features&&(1==e.features.length?(i=e.features[0],i.setInfoTemplate(this.popupTemplate)):i.setInfoTemplate(this.multipleRecordsTemplate)),i},_setupEvents:function(){this.consoleLogging&&console.log(this._logNode+"._setupEvents"),this._editToolbar=new esri.toolbars.Edit(this._gisMap)
var e=this._gisMap.infoWindow.domNode.querySelector(".title"),i=new dojo.dnd.Moveable(this._gisMap.infoWindow.domNode,{handle:e})
i.on("FirstMove",g.hitch(this,function(){var e=this._gisMap.infoWindow.domNode.querySelector(".outerPointer")
e.classList.add("hidden"),e=this._gisMap.infoWindow.domNode.querySelector(".pointer"),e.classList.add("hidden")}).bind(this)),dojo.query(".searchInputGroup input")[0].placeholder="Zoek adres of plaats"},_layerAddResultsEventHandler:function(e){if(this._queryLayerObj&&this._queryDefinition?this._getExtentFromQueryDef(this._queryLayerObj,this._queryDefinition):this.objectid?this.zoomRow(this.objectid,this.centerCoordinates,this.geometryType):this.zoomRow(),this.enableLegend){var r=new esri.dijit.Legend({map:this._gisMap,layerInfos:this.legendLayers},this.legendDiv)
r.startup()}if(this.enableToggleLayers)for(var s=[],o=null,l=[],a=[],n=0;n<this.legendLayers.length;n++){s=[],o=this.legendLayers[n],l=o.layer.layerInfos,a=o.layer.visibleLayers
var c=0
if(l&&a){for(var h=0;h<a.length;h++)l[h]&&s.push(l[h])
c=s.length}var d=o.title,b=i.create("span",{id:"spanLabel_"+n})
this.startSubLayerListCollapsed?b.className="caret caret-left":b.className="caret",this._setCaretCSS(b)
var y=i.create("label",{"for":"checkBox"+o.layer.id,innerHTML:d,style:{"font-weight":700}},"  "+d+" ("+c+") ",b),m=i.create("input",{name:"checkBox"+o.layer.id,value:o.layer.id,checked:o.startLayerTicked,type:"checkbox"}),u=i.create("ul",{style:{"list-style-type":"none",padding:0,margin:0,cursor:"pointer"}},y,m)
dojo.place(y,m,"after"),dojo.place(u,this.toggleDiv,"after"),t(m,"click",g.hitch(this,function(e){var i=this._gisMap.getLayer(e.target.value)
i.setVisibility(!i.visible),e.target.checked=i.visible})),t(u,"click",g.hitch(this,function(e){if("UL"==e.target.parentNode.tagName){var i=e.target.parentNode
this._toggleSubLayerList(i)}"LI"==e.target.parentNode.tagName&&this.consoleLogging&&console.log(this._logNode+"li clicked")}))
for(var p=0;p<s.length;p++){var S=s[p].name,f=s[p].id,A=i.create("label",{"for":"checkBox"+f,innerHTML:S,style:{"font-weight":400}},"  "+S),I=i.create("input",{name:"checkBox"+f,value:o.layer.id+"-"+f,checked:s[p].defaultVisibility,type:"checkbox",style:"margin-left:10px"}),_=i.create("li",{},I,A)
dojo.place(_,y,"after"),t(I,"click",g.hitch(this,function(e){var i=e.target.value.split("-"),r=this._gisMap.getLayer(i[0]),t=r.visibleLayers,s=+i[1]
this.containsObject(s,t)?t=this._removeFromArr(t,s):t.push(s),r.setVisibleLayers(t)}))}o.startLayerTicked?this.startSubLayerListCollapsed&&this._toggleSubLayerList(u):(m.click(),u.click())}},zoomRow:function(e,i,r){this.consoleLogging&&(console.log(this.id+".zoomRow"),console.log(this._logNode+e),console.log(this._logNode+i),console.log(this._logNode+r))
var t=[],s=this.defaultX,o=this.defaultY,l=this._gisMap.spatialReference,a=new esri.geometry.Point(+this.defaultX,+this.defaultY,l)
if(e)if(i)t=i.split(","),s=+t[0],o=+t[1],a=new esri.geometry.Point(s,o,l),this._gisMap.centerAndZoom(a,+this._singleObjectZoom-1)
else{var n=new esri.tasks.Query
n.outSpatialReference=l,n.returnGeometry=!0,n.outFields=this.queryOutFieldsArr,n.where=this.arcGISID+"="+e
var c=this.layerArr.filter(g.hitch(this,function(e){return e.geometryType==r}))[0]
c?this._queryLayer(n,c):console.error(this._logNode+"For zooming a layerObj is needed. This was not found. Do all Layers have the correct geometryType defined in the Modeler?")}else this._gisMap.centerAndZoom(this._defaultPosition,+this.defaultZoom-1)},containsObject:function(e,i){this.consoleLogging&&console.log(this.id+".zoomRow")
var r
for(r=0;r<i.length;r++)if(i[r]==e)return!0
return!1},_toggleSubLayerList:function(e){this.consoleLogging&&console.log(this.id+"._toggleSubLayerList")
for(var i=Array.from(e.childNodes),r=1;r<i.length;r++)if("LI"==e.childNodes[r].tagName&&("none"==e.childNodes[r].style.display?e.childNodes[r].style.display="block":e.childNodes[r].style.display="none"),"LABEL"==e.childNodes[r].tagName){var t=e.childNodes[r].lastElementChild
"caret"==t.className?t.className+=" caret-left":t.className="caret",this._setCaretCSS(t)}},_setCaretCSS:function(e){this.consoleLogging&&console.log(this.id+"._setCaretCSS"),e&&"caret caret-left"==e.className?(e.style.borderRight="4px solid "+this.customColor,e.style.borderBottom="4px solid transparent",e.style.borderTop="4px solid transparent"):e&&"caret"==e.className&&(e.style.borderRight="4px solid transparent",e.style.borderBottom="4px solid transparent",e.style.borderTop="4px solid "+this.customColor)},_injectVariableStyling:function(){if(this.consoleLogging&&console.log(this.id+"._injectVariableStyling"),""!==this.customColor){var e=document.createElement("style")
e.type="text/css",e.innerHTML=".claro .dijitAccordionTitleSelected { background-color: "+this.selectedColor+";}",e.innerHTML+=".toggleTemplatePane .dijitAccordionContainer-child .dijitAccordionContainer-dijitContentPane { background-color: "+this.selectedColor+";}",document.body.appendChild(e)
var i=document.createElement("style")
i.type="text/css",i.innerHTML=".claro .dijitAccordionInnerContainer:hover { background-color: "+this.customColor+";}",document.body.appendChild(i)
var r=document.createElement("style")
r.type="text/css",r.innerHTML=".esriPopup .titlePane { background-color: "+this.customColor+";}",document.body.appendChild(r)}n.set(this.domNode,{height:this.mapHeight+"px",width:this.mapWidth+"px"})},_getReferenceMxObjects:function(e,i){if(this.consoleLogging&&console.log(this.id+"._getReferenceMxObjects"),this.objectEntity&&this.xPathConstraint){this.consoleLogging&&console.info(this._logNode+"get from XPath")
var r="//"+this.objectEntity+this.xPathConstraint
this._contextObj&&(r=r.replace("'[%CurrentObject%]'",this._contextObj.getGuid())),this.consoleLogging&&console.log(this._logNode+"XPATH: "+r),mx.data.get({xpath:r,callback:g.hitch(this,function(r){this.consoleLogging&&(console.log(this._logNode+"Received "+r.length+" MxObjects: "),console.dir(this._logNode+r)),this._referenceMxObjectsArr=r,i?this._refreshMap(r):this._loadMap(e)})})}else if(this._getObjectsMF){this.consoleLogging&&console.log(this._logNode+"get from DS MF set from Modeler")
var t=this._contextObj.getGuid()
mx.data.action({params:{applyto:"selection",actionname:this._getObjectsMF,guids:[t]},origin:this.mxform,callback:g.hitch(this,function(r){this.consoleLogging&&(console.log(this._logNode+"Received "+r.length+" MxObjects: "),console.dir(this._logNode+r)),this._referenceMxObjectsArr=r,i?this._refreshMap(r):this._loadMap(e)}),error:g.hitch(this,function(e){console.error(this._logNode+e.description)})})}else this.consoleLogging&&console.info(this._logNode+"get object from DataView entity"),this._contextObj&&this._referenceMxObjectsArr.push(this._contextObj),i?this._refreshMap([this._contextObj]):this._loadMap(e)},_getMxObject:function(e,i,r){this.consoleLogging&&console.log(this.id+"._getMxObject")
var t=null
if(this._referenceMxObjectsArr&&this._referenceMxObjectsArr.length>0)t=this._referenceMxObjectsArr.filter(g.hitch(this,function(i){return i.get(this.objectIDAttr)==e.attributes[this.arcGISID]&&i.get(this.geometryTypeAttr)==e.geometry.type}))[0],i&&"function"==typeof i&&i(t,r)
else{var s="//"+this.objectEntity+"["+this.objectIDAttr+" = "+e.attributes[this.arcGISID]+" and "+this.geometryTypeAttr+" = '"+e.geometry.type+"']"
this.consoleLogging&&console.log(this._logNode+s),mx.data.get({xpath:s,callback:g.hitch(this,function(e){this.consoleLogging&&(console.log(this._logNode+"Received "+e.length+" MxObjects: "),console.dir(this._logNode+e)),t=e[0],i(t,r)})})}},_createTemplate:function(){this.consoleLogging&&console.log(this.id+"._createTemplate")
var e=new dijit.layout.BorderContainer({className:"content",gutters:!1,design:"headline",style:{height:"100%",width:"100%"}})
this.contentPane=e.domNode,n.set(this.contentPane,{height:"100%",width:"100%"})
var i=new dijit.layout.ContentPane({className:"mapDiv",region:"center"}),r=c.create("div",{className:"BasemapToggleDiv"},i.domNode)
if(this.BasemapToggleDiv=r,e.addChild(i),this.mapContainer=i.domNode,n.set(this.mapContainer,{height:"100%",width:"100%",border:"solid 2px "+this.customColor}),c.place(this.contentPane,this.domNode),this.enableToggleLayers|this.enableLegend){var t=new dijit.layout.ContentPane({className:"rightPane",region:"right",height:"100%"}),s=new dijit.layout.AccordionContainer
if(this.accordionContainer=t.domNode,n.set(this.mapContainer,{width:"80%"}),n.set(this.accordionContainer,{height:"100%",width:"20%"}),t.addChild(s),e.addChild(t),this.enableLegend){var o=new dijit.layout.ContentPane({className:"legendPane",title:"Legenda"})
this.legendDiv=c.create("div",{className:"legendDiv"},o.domNode),s.addChild(o),this.legendPane=o.domNode}if(this.enableToggleLayers){var l=new dijit.layout.ContentPane({className:"toggleLayerPane",title:"Lagen",style:"overflow-y: auto;"})
this.toggleDiv=c.create("div",{className:"toggleDiv",style:"padding: 2px 2px;"},l.domNode),s.addChild(l)}}if(this.enableSearch){var a=c.create("div",{className:"searchDiv"},i.domNode)
this.searchDiv=a}this._injectVariableStyling()},_createButton:function(e,i,r,t,s){this.consoleLogging&&console.log(this.id+"._createButton")
var o=new dijit.form.Button({className:i,iconClass:r,innerHTML:t,backgroundImage:s})
return null!==e&&(this[e]=o.domNode),o},_createQueryDefinition:function(){var e=""
if(this._referenceMxObjectsArr.length>0){e=this.arcGISID+" IN ("
var i=null,r=null,t=!0
this._objectsWithoutCoordinates=[]
for(var s=0;s<this._referenceMxObjectsArr.length;s++)i=this._referenceMxObjectsArr[s].get(this.objectIDAttr),r=this._referenceMxObjectsArr[s].get(this.centerAttr),i&&(t||(e+=","),t&&(t=!1),e+=i)
e+=")"}return this.consoleLogging&&console.log(e),e},_getCenterCoordinates:function(e){this.consoleLogging&&console.log(this.id+"._getCenterCoordinates")
var i,r,t=null,s=null
if("polyline"==e.type||"polygon"==e.type){var o=""
e.rings?o=new esri.geometry.Polyline(e.rings).getExtent():e.paths&&(o=new esri.geometry.Polyline(e.paths).getExtent()),i=(o.xmax+o.xmin)/2,r=(o.ymax+o.ymin)/2,s=e.spatialReference,t=new esri.geometry.Point(i,r,s)}else"point"==e.type&&(i=e.x,r=e.y,s=e.spatialReference,t=new esri.geometry.Point(i,r,s))
return t},_generateError:function(e){console.error(e),mx.ui.info(e,!1)},_removeFromArr:function(e){for(var i,r,t=arguments,s=t.length;s>1&&e.length;)for(i=t[--s];-1!==(r=e.indexOf(i));)e.splice(r,1)
return e},uninitialize:function(){this.consoleLogging&&console.log(this.id+".uninitialize")}})})}),require(["ArcGIS/widget/ArcGIS"],function(){})
